(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Home/booking/AppointmentDesign"],{"172d":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uNavbar:function(){return i.e("uview-ui/components/u-navbar/u-navbar").then(i.bind(null,"452c"))},uInput:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-input/u-input")]).then(i.bind(null,"fd95"))},uUpload:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-upload/u-upload")]).then(i.bind(null,"7ae7"))},uHeigth:function(){return i.e("uview-ui/components/u-heigth/u-heigth").then(i.bind(null,"9270"))},uSelect:function(){return i.e("uview-ui/components/u-select/u-select").then(i.bind(null,"575f"))},uToast:function(){return i.e("uview-ui/components/u-toast/u-toast").then(i.bind(null,"c9d7"))},uPicker:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-picker/u-picker")]).then(i.bind(null,"31a4"))},uPopup:function(){return i.e("uview-ui/components/u-popup/u-popup").then(i.bind(null,"d62c"))}},a=function(){var t=this,e=t.$createElement;t._self._c},s=[]},"47c5":function(t,e,i){"use strict";var n=i("e1c4"),a=i.n(n);a.a},7502:function(t,e,i){"use strict";i.r(e);var n=i("e01b"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},d260:function(t,e,i){"use strict";i.r(e);var n=i("172d"),a=i("7502");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("47c5");var o,u=i("f0c5"),c=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"1afbf0da",null,!1,n["a"],o);e["default"]=c.exports},e01b:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,i,n,a,s,o){try{var u=t[s](o),c=u.value}catch(r){return void i(r)}u.done?e(c):Promise.resolve(c).then(n,a)}function o(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var o=t.apply(e,i);function u(t){s(o,n,a,u,c,"next",t)}function c(t){s(o,n,a,u,c,"throw",t)}u(void 0)}))}}function u(t){return l(t)||h(t)||r(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"===typeof t)return d(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(t,e):void 0}}function h(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t){if(Array.isArray(t))return d(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var p={data:function(){return{mobanid:["qFe_Sxyot4g5R2qJhpo5ECIp6TvRjYFY3g-WIVAgjXU","auLnrnvAYh0neKlgtVQ5OEDvbppe0KEF8lXVVC0tLZU"],code:"",niannum:0,nianlist:[],nianning:!1,shijianshow:!1,state:1,fans:{},mony:"9980.00",isyuyue:0,poplist:[],sel_list:"",popshow:"",name:"image",formData:{},header:{token:t.getStorageSync("token")},action:this.$shangchuan+"/api/byd_user/addpostspic",isadd:!0,man_data:[{id:0,age:"",select:1e4,del:!1},{id:1,age:"",select:1e4,del:!0}],man_list:[{id:0,text:"先生"},{id:1,text:"女士"},{id:2,text:"男孩"},{id:3,text:"女孩"}],numbers:1e3,title:"预约设计",data_list:{},chuanzhi:{},list:[{title:"基本信息",list:[{id:0,name:"姓名",obj:"name",text:"请填写真实姓名",type:"input"},{id:1,name:"性别",obj:"sex",select:["先生","女士"],type:"checkbox"},{id:2,name:"联系电话",obj:"phone",text:"请填写您的联系电话",type:"input"}]},{title:"项目概括",list:[{id:3,name:"所在地区",obj:"city",text:"请填写所在地区",type:"address",show:!1},{id:4,name:"详细地址",obj:"dire",text:"小区名字、栋号单元号等详细地址",type:"textarea"},{id:5,name:"房屋户型",obj:"housetype",text:"请选择您的户型",type:"Picker",show:!1},{id:12,name:"交付时间",obj:"jf",text:"请选择交付时间",type:"Picker",show:!1},{id:12,name:"入住时间",obj:"rz",text:"请选择入住时间",type:"Picker",show:!1},{id:6,name:"装修现状",obj:"zx",text:"请选择装修现状",type:"Picker",show:!1},{id:7,name:"喜欢风格",obj:"style",text:"请选择喜欢风格",type:"Picker",show:!1},{id:8,name:"喜欢色调",obj:"color",text:"请选择装修色调",type:"Picker",show:!1},{id:9,name:"新房居住成员",obj:"people",type:"xuan",list:[]}]},{title:"相关文件",list:[{id:10,name:"平面图",obj:"aboveimage",text:"(手机拍照/购房宣传册)",type:"upload",img_list:[]},{id:11,name:"现场照片",obj:"image",text:"",type:"upload",img_list:[]}]}],img:this.$imgPath,states:"",colorssss:[],stylessss:[],huxinssss:[],timea:0,huoqu:"获取验证码"}},onLoad:function(e){for(var i=this,n=1;n<=100;n++)this.nianlist.push({value:n,label:n+"岁"});e.yuyue&&(this.isyuyue=e.yuyue,this.gethomepage()),this.data_list=t.getStorageSync("dataKKlist")||{},this.$api.color().then((function(t){1==t.data.code&&t.data.data.status.forEach((function(t){i.colorssss.push({check:!1,name:t.title,id:t.id,image:""})}))})),this.$api.huxincategory().then((function(t){1==t.data.code&&t.data.data.status.forEach((function(t){i.huxinssss.push({check:!1,name:t.title,id:t.id,image:""})}))})),this.$api.style().then((function(t){1==t.data.code&&t.data.data.status.forEach((function(t){i.stylessss.push({check:!1,name:t.title,id:t.id,image:i.$imgPath+t.image})}))}))},methods:{baochun:function(){t.setStorageSync("dataKKlist",this.data_list)},go_code:function(){var e=this;0==e.timea&&e.$api.emsphone({phone:e.data_list.phone}).then((function(i){if(1==i.data.code){t.showToast({title:"发送成功",duration:1e3,icon:"none"}),e.timea=60;var n=setInterval((function(){e.timea--,e.huoqu=e.timea+"s后获取",0==e.timea&&(clearInterval(n),e.huoqu="获取验证码")}),1e3)}else t.showToast({title:"发送失败",duration:1e3,icon:"none"})}))},nianopen:function(t){this.niannum=t,this.nianning=!0},confirm:function(t){this.man_data[this.niannum].age=t[0].value},kan1:function(e){t.previewImage({urls:[e],longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){},fail:function(t){}}})},kan:function(e){t.previewImage({urls:[this.$imgPath+e],longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){},fail:function(t){}}})},sanchuhsuahsuhd:function(t){this.man_data.splice(t,1),this.isadd=!0},zhishizhege:function(t){this.data_list[this.chuanzhi.obj]=t.year+"-"+t.month+"-"+t.day,this.baochun()},address:function(e){var i=this,n=i.data_list;t.chooseLocation({success:function(t){n[e.obj]=t.address,i.data_list={},i.data_list=n,i.baochun()}})},zhifuyuyue:function(e){this.$api.paymoney({type:e,user_id:t.getStorageSync("user_info").id,id:this.fans.id}).then((function(e){200==e.data.code&&t.requestPayment({timeStamp:e.data.data.timeStamp,nonceStr:e.data.data.nonceStr,package:e.data.data.package,signType:e.data.data.signType,paySign:e.data.data.paySign,success:function(e){t.showToast({title:"支付成功",icon:"none"}),t.navigateBack({delta:1})},fail:function(e){t.showToast({title:"支付失败",icon:"none"})}})}))},gethomepage:function(){var e=this;this.fans=t.getStorageSync("yuyue_info"),this.state=this.fans.state,this.states=this.fans.states,this.mony=this.fans.price;var i=this.fans.image.split(","),n=this.fans.aboveimage.split(","),a=this.fans.people.split(","),s=[],o=[],c="";c=0==this.fans.sex?"男":"女",i.forEach((function(t){t=e.$imgPath+t})),n.forEach((function(t){t=e.$imgPath+t})),a.forEach((function(t){s.push(t.split("_"))})),s.forEach((function(t){o.push({sex:t[1],age:t[0]})})),this.list=[],this.list.push({title:"基本信息",list:[{id:0,name:"姓名",obj:"name",text:this.fans.name,type:"Displays_data"},{id:1,name:"性别",obj:"sex",text:c,select:["先生","女士"],type:"Displays_data"},{id:2,name:"联系电话",obj:"phone",text:this.fans.phone,type:"Displays_data"}]},{title:"项目概括",list:[{id:3,name:"所在地区",obj:"city",text:this.fans.city,type:"Displays_data",show:!1},{id:4,name:"详细地址",obj:"dire",text:this.fans.dire,type:"Displays_data"},{id:5,name:"房屋户型",obj:"housetype",text:this.fans.housetype,type:"Displays_data",show:!1},{id:12,name:"交付时间",obj:"jf",text:this.fans.jf,type:"Displays_data",show:!1},{id:6,name:"入住时间",obj:"rz",text:this.fans.rz,type:"Displays_data",show:!1},{id:6,name:"装修现状",obj:"zx",text:this.fans.zx,type:"Displays_data",show:!1},{id:7,name:"喜欢风格",obj:"style",text:this.fans.style,type:"Displays_data",show:!1},{id:8,name:"喜欢色调",obj:"color",text:this.fans.color,type:"Displays_data",show:!1},{id:13,name:"提交时间",obj:"jf",text:this.fans.tjtime,type:"Displays_data",show:!1},{id:9,name:"新房居住成员",obj:"people",type:"xuan",list:[].concat(o)}]},{title:"相关文件",list:[{id:10,name:"平面图",obj:"aboveimage",text:"(手机拍照/购房宣传册)",type:"upload",img_list:u(n)},{id:11,name:"现场照片或视频",obj:"image",text:"",type:"upload",img_list:u(i)}]})},uploaded:function(t,e){var i=t,n=[];i.forEach((function(t){n.push(t.response.data.status)})),this.data_list[e.obj]=n},xunhuan:function(t){var e=this;this.poplist.forEach((function(i,n){n==t&&(e.poplist[t].check=!e.poplist[t].check,e.sel_list=e.sel_list+e.poplist[t].name+",")}))},change:function(){this.sel_list=this.sel_list.substr(0,this.sel_list.length-1),this.data_list[this.chuanzhi.obj]=this.sel_list,this.baochun(),this.popshow=!1},re:function(){this.poplist.forEach((function(t){t.check=!1}))},tijiao:function(){var e=this;return o(n.default.mark((function i(){return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$login();case 2:if(!i.sent){i.next=8;break}if(""==e.code){i.next=7;break}e.$api.emsyzphone({phone:e.data_list.phone,yzm:e.code}).then((function(i){if(1!=i.data.code)return t.showToast({title:"验证码错误",duration:1e3,icon:"none"});var n=e;t.requestSubscribeMessage({tmplIds:n.mobanid,complete:function(e){n.data_list["user_id"]=t.getStorageSync("user_info").id;var i=n.data_list.people,a=[],s=!1;if(!n.data_list.people)return t.showToast({title:"请选择人员",duration:1e3,icon:"none"});for(var o in i){if(1e4==i[o].select||""==i[o].age){s=!0;break}a.push(i[o].age+"_"+i[o].id)}if(s)return t.showToast({title:"请检查人员选项",icon:"none"});n.data_list.people=a;var u=Object.keys(n.data_list).length;if(15!=u)return t.showToast({title:"请检查",icon:"none"});n.$api.yydes(n.data_list).then((function(e){1==e.data.code?(setTimeout((function(){t.navigateBack(-1)}),2e3),n.$refs.uToast.show({title:"提交预约成功，请到个人中心-预约设计查看进度安排",duration:2e3})):t.showToast({title:e.data.msg,duration:1e3,icon:"none"})}))}})})),i.next=8;break;case 7:return i.abrupt("return",t.showToast({title:"请输入验证码",icon:"none"}));case 8:case"end":return i.stop()}}),i)})))()},guan:function(){this.popshow=!1,this.shijianshow=!1},add:function(){var t=this.man_data.length;if(t<=10){for(var e=0;e<1;e++)this.man_data.push({id:t+e,age:"",select:1e4,del:!0});this.man_data.length>=10&&(this.isadd=!1)}},danxuans:function(t,e,i,n){var a,s=this.man_data;s[i].select=t,this.man_data=[],(a=this.man_data).push.apply(a,u(s)),this.data_list[n.obj]=this.man_data},danxuan:function(t,e,i){this.numbers=t,this.data_list[i.obj]=t},open:function(t){this.sel_list="","style"==t.obj?(this.poplist=[],this.poplist=u(this.stylessss),this.popshow=!0):"color"==t.obj?(this.poplist=[],this.poplist=u(this.colorssss),this.popshow=!0):"zx"==t.obj?(this.poplist=[],this.poplist=[{check:!1,name:"精装房",id:0,image:""},{check:!1,name:"毛坯房",id:1,image:""},{check:!1,name:"旧房",id:12,image:""},{check:!1,name:"其他",id:100,image:""}],this.popshow=!0):"housetype"==t.obj?(this.poplist=[],this.poplist=u(this.huxinssss),this.popshow=!0):"jf"!=t.obj&&"rz"!=t.obj||(this.shijianshow=!0),this.re(),this.chuanzhi=t},back:function(e){switch(e){case 0:t.navigateBack(-1);break;case 1:t.reLaunch({url:"/pages/Home/Home"});break;default:}}}};e.default=p}).call(this,i("543d")["default"])},e1c4:function(t,e,i){},f411:function(t,e,i){"use strict";(function(t){i("c9dc");n(i("66fd"));var e=n(i("d260"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])}},[["f411","common/runtime","common/vendor"]]]);